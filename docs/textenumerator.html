<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple Text Tool</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <div style="display: flex; flex-direction: column; max-width: 600px; margin: auto;">
    <textarea id="inputBox" placeholder="Write here..." rows="5" style="margin-bottom: 10px;"></textarea>

    <div>
      <label for="countInput">Count:</label>
      <input type="number" id="countInput" value="1" min="1" style="margin-right: 10px;">
      <label for="selectInput">Select (comma-separated):</label>
      <input type="text" id="selectInput" value="1"  placeholder="e.g., 1,3" style="margin-right: 10px;">
    </div>

    <div style="margin: 10px 0;">
      <button id="runBtn">Run</button>
      <button id="clearOutputBtn">Clear Output</button>
      <button id="copyOutputBtn">Copy Output</button>
    </div>

    <textarea id="outputBox" placeholder="Output..." rows="5" readonly style="margin-top: 10px;"></textarea>
  </div>

  <script>
    $(document).ready(function () {
      function generateOutput() {
        const inputText = $("#inputBox").val().trim();
        const count = parseInt($("#countInput").val());
        const selection = $("#selectInput").val().trim();
        const outputBox = $("#outputBox");

        outputBox.val("");

        if (!inputText) {
          alert("Input text cannot be empty!");
          return;
        }

        if (isNaN(count) || count < 1) {
          alert("Count must be a valid number greater than 0!");
          return;
        }

        const items = inputText.split(/\r?\n/);
        const selections =  selection ? selection.split(",").map((num) => parseInt(num.trim()) - 1) : [];
        alert(selections);
        if (selections.some((index) => isNaN(index) || index < 0)) {
          alert("Selection must be a comma-separated list of positive integers!");
          return;
        }

        let result = "";
       
        items.forEach((item, index) => {
            if (1) {
              result += `${index},${item}\n`;
            }
          });
        

        outputBox.val(result.trim());
      }

      function clearOutput() {
        $("#outputBox").val("");
      }

      function copyOutput() {
        const outputBox = $("#outputBox");
        if (!outputBox.val().trim()) {
          alert("Nothing to copy!");
          return;
        }
        outputBox.select();
        document.execCommand("copy");
        alert("Output copied to clipboard!");
      }

      $("#runBtn").click(generateOutput);
      $("#clearOutputBtn").click(clearOutput);
      $("#copyOutputBtn").click(copyOutput);
    });
  </script>
</body>
</html>
